import{j as c}from"./index-Dd426QHC.js";const w="/%3CREPO%3E/assets/sinterkerst-C5Qj2tnV.mp3",s=c(null),t=c(null),n=c(null),l=c(null),r=c(!1),i=async()=>(s.value||(s.value=new AudioContext,t.value=s.value.createGain(),t.value.gain.value=.15,t.value.connect(s.value.destination)),s.value.state==="suspended"&&await s.value.resume(),s.value),d=()=>{t.value&&(t.value.gain.value=r.value?0:.15)},m=async(a,u=.2,e=.12)=>{const v=await i();if(!t.value)return;const o=v.createOscillator(),f=v.createGain();o.type="square",o.frequency.value=a,f.gain.value=r.value?0:e,o.connect(f).connect(t.value);const p=v.currentTime;o.start(p),o.stop(p+u)},y=async()=>{if(l.value)return l.value;const a=await i(),e=await(await fetch(w)).arrayBuffer();return l.value=await a.decodeAudioData(e),l.value},x=async()=>{const a=await i(),u=await y();if(!u||!t.value)return;n.value&&(n.value.stop(),n.value.disconnect());const e=a.createBufferSource();e.buffer=u,e.loop=!0,e.connect(t.value),e.start(0),n.value=e,d()},g=()=>{n.value&&(n.value.stop(),n.value.disconnect(),n.value=null)},C=()=>{[0,4,7,12].forEach((u,e)=>{window.setTimeout(()=>{m(523.25*Math.pow(2,u/12),.25,.18)},e*90)})},h=()=>{m(880,.15,.1)},B=a=>{r.value=a,d()},M=()=>({isMuted:r,ensureContext:i,setMuted:B,startLoop:x,stopLoop:g,playWinChord:C,playTimerPing:h});export{M as u};
